{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Establecer nueva contraseña</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" referrerpolicy="no-referrer">
    <link rel="stylesheet" href="{% static 'public/recuperar-password/css/main.css' %}">
</head>
<body>

<header>
    <div class="header-left">
        <a href="{% url 'index' %}">
            <img src="{% static 'images/NowHere.svg' %}" id="Logo" alt="NöwHėrē">
        </a>
        <h2>| Recuperar contraseña</h2>
    </div>
</header>

<main>
  <section class="recovery-section">
    <h1>Establecer nueva contraseña</h1>
    <p class="recovery-desc">Introduce y confirma tu nueva contraseña a continuación.</p>

    {% if error %}
      <p class="error">{{ error }}</p>
    {% endif %}

    <form method="POST"
          action="{% url 'cliente_reset_password_submit' uidb64=uidb64 token=token %}">
      {% csrf_token %}

      <div class="form-group">
        <label for="password1">Nueva contraseña*</label>
        <div class="password-wrapper">
          <input type="password" name="password1" id="password1" required placeholder="Mínimo 8 caracteres" autocomplete="new-password">
          <button type="button" class="toggle-password" aria-label="Mostrar contraseña">
            <i class="fa-regular fa-eye"></i>
          </button>
        </div>
      </div>

      <div class="form-group">
        <label for="password2">Confirmar contraseña*</label>
        <div class="password-wrapper">
          <input type="password" name="password2" id="password2" required placeholder="Repite tu contraseña" autocomplete="new-password">
          <button type="button" class="toggle-password" aria-label="Mostrar contraseña">
            <i class="fa-regular fa-eye"></i>
          </button>
        </div>
      </div>

      <button type="submit" class="btn-primary">Cambiar contraseña</button>
    </form>
  </section>
</main>

<script>
  document.querySelectorAll('.toggle-password').forEach(btn => {
    btn.addEventListener('click', () => {
      const input = btn.parentElement.querySelector('input');
      const icon = btn.querySelector('i');
      if (input.type === 'password') {
        input.type = 'text';
        icon.classList.replace('fa-eye', 'fa-eye-slash');
      } else {
        input.type = 'password';
        icon.classList.replace('fa-eye-slash', 'fa-eye');
      }
    });
  });
</script>

</body>
</html>
</html>
